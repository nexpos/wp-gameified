!function(e,i,s){"undefined"!=typeof module&&module.exports?module.exports=s():"function"==typeof define&&define.amd?define(i,s):e[i]=s()}(this,"bowser",function(){var B=!0;function t(s){function e(e){var i=s.match(e);return i&&1<i.length&&i[1]||""}function i(e){var i=s.match(e);return i&&1<i.length&&i[2]||""}var o,r=e(/(ipod|iphone|ipad)/i).toLowerCase(),n=!/like android/i.test(s)&&/android/i.test(s),t=/nexus\s*[0-6]\s*/i.test(s),a=!t&&/nexus\s*[0-9]+/i.test(s),d=/CrOS/.test(s),m=/silk/i.test(s),v=/sailfish/i.test(s),l=/tizen/i.test(s),c=/(web|hpw)(o|0)s/i.test(s),u=/windows phone/i.test(s),p=(/SamsungBrowser/i.test(s),!u&&/windows/i.test(s)),f=!r&&!m&&/macintosh/i.test(s),w=!n&&!v&&!l&&!c&&/linux/i.test(s),h=i(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),b=e(/version\/(\d+(\.\d+)?)/i),g=/tablet/i.test(s)&&!/tablet pc/i.test(s),y=!g&&/[^-]mobi/i.test(s),k=/xbox/i.test(s);/opera/i.test(s)?o={name:"Opera",opera:B,version:b||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(s)?o={name:"Opera",opera:B,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(s)?o={name:"Samsung Internet for Android",samsungBrowser:B,version:b||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(s)?o={name:"NAVER Whale browser",whale:B,version:e(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(s)?o={name:"MZ Browser",mzbrowser:B,version:e(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(s)?o={name:"Opera Coast",coast:B,version:b||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(s)?o={name:"Focus",focus:B,version:e(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(s)?o={name:"Yandex Browser",yandexbrowser:B,version:b||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(s)?o={name:"UC Browser",ucbrowser:B,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(s)?o={name:"Maxthon",maxthon:B,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(s)?o={name:"Epiphany",epiphany:B,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(s)?o={name:"Puffin",puffin:B,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(s)?o={name:"Sleipnir",sleipnir:B,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(s)?o={name:"K-Meleon",kMeleon:B,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:u?(o={name:"Windows Phone",osname:"Windows Phone",windowsphone:B},h?(o.msedge=B,o.version=h):(o.msie=B,o.version=e(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(s)?o={name:"Internet Explorer",msie:B,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:d?o={name:"Chrome",osname:"Chrome OS",chromeos:B,chromeBook:B,chrome:B,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(s)?o={name:"Microsoft Edge",msedge:B,version:h}:/vivaldi/i.test(s)?o={name:"Vivaldi",vivaldi:B,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||b}:v?o={name:"Sailfish",osname:"Sailfish OS",sailfish:B,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(s)?o={name:"SeaMonkey",seamonkey:B,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(s)?(o={name:"Firefox",firefox:B,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(s)&&(o.firefoxos=B,o.osname="Firefox OS")):m?o={name:"Amazon Silk",silk:B,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(s)?o={name:"PhantomJS",phantom:B,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(s)?o={name:"SlimerJS",slimer:B,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(s)||/rim\stablet/i.test(s)?o={name:"BlackBerry",osname:"BlackBerry OS",blackberry:B,version:b||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:c?(o={name:"WebOS",osname:"WebOS",webos:B,version:b||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(s)&&(o.touchpad=B)):/bada/i.test(s)?o={name:"Bada",osname:"Bada",bada:B,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:l?o={name:"Tizen",osname:"Tizen",tizen:B,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(s)?o={name:"QupZilla",qupzilla:B,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(s)?o={name:"Chromium",chromium:B,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(s)?o={name:"Chrome",chrome:B,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:n?o={name:"Android",version:b}:/safari|applewebkit/i.test(s)?(o={name:"Safari",safari:B},b&&(o.version=b)):r?(o={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},b&&(o.version=b)):o=/googlebot/i.test(s)?{name:"Googlebot",googlebot:B,version:e(/googlebot\/(\d+(\.\d+))/i)||b}:{name:e(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)},!o.msedge&&/(apple)?webkit/i.test(s)?(/(apple)?webkit\/537\.36/i.test(s)?(o.name=o.name||"Blink",o.blink=B):(o.name=o.name||"Webkit",o.webkit=B),!o.version&&b&&(o.version=b)):!o.opera&&/gecko\//i.test(s)&&(o.name=o.name||"Gecko",o.gecko=B,o.version=o.version||e(/gecko\/(\d+(\.\d+)?)/i)),o.windowsphone||!n&&!o.silk?!o.windowsphone&&r?(o[r]=B,o.ios=B,o.osname="iOS"):f?(o.mac=B,o.osname="macOS"):k?(o.xbox=B,o.osname="Xbox"):p?(o.windows=B,o.osname="Windows"):w&&(o.linux=B,o.osname="Linux"):(o.android=B,o.osname="Android");var x="";o.windows?x=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)):o.windowsphone?x=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o.mac?x=(x=e(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):r?x=(x=e(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):n?x=e(/android[ \/-](\d+(\.\d+)*)/i):o.webos?x=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?x=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?x=e(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(x=e(/tizen[\/\s](\d+(\.\d+)*)/i)),x&&(o.osversion=x);var S=!o.windows&&x.split(".")[0];return g||a||"ipad"==r||n&&(3==S||4<=S&&!y)||o.silk?o.tablet=B:(y||"iphone"==r||"ipod"==r||n||t||o.blackberry||o.webos||o.bada)&&(o.mobile=B),o.msedge||o.msie&&10<=o.version||o.yandexbrowser&&15<=o.version||o.vivaldi&&1<=o.version||o.chrome&&20<=o.version||o.samsungBrowser&&4<=o.version||o.whale&&1===O([o.version,"1.0"])||o.mzbrowser&&1===O([o.version,"6.0"])||o.focus&&1===O([o.version,"1.0"])||o.firefox&&20<=o.version||o.safari&&6<=o.version||o.opera&&10<=o.version||o.ios&&o.osversion&&6<=o.osversion.split(".")[0]||o.blackberry&&10.1<=o.version||o.chromium&&20<=o.version?o.a=B:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6||o.chromium&&o.version<20?o.c=B:o.x=B,o}var a=t("undefined"!=typeof navigator&&navigator.userAgent||"");function o(e){return e.split(".").length}function r(e,i){var s,o=[];if(Array.prototype.map)return Array.prototype.map.call(e,i);for(s=0;s<e.length;s++)o.push(i(e[s]));return o}function O(e){for(var s=Math.max(o(e[0]),o(e[1])),i=r(e,function(e){var i=s-o(e);return r((e+=new Array(i+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});0<=--s;){if(i[0][s]>i[1][s])return 1;if(i[0][s]!==i[1][s])return-1;if(0===s)return 0}}function n(e,i,s){var o=a;"string"==typeof i&&(s=i,i=void 0),void 0===i&&(i=!1),s&&(o=t(s));var r=""+o.version;for(var n in e)if(e.hasOwnProperty(n)&&o[n]){if("string"!=typeof e[n])throw new Error("Browser version in the minVersion map should be a string: "+n+": "+String(e));return O([r,e[n]])<0}return i}return a.test=function(e){for(var i=0;i<e.length;++i){var s=e[i];if("string"==typeof s&&s in a)return!0}return!1},a.isUnsupportedBrowser=n,a.compareVersions=O,a.check=function(e,i,s){return!n(e,i,s)},a._detect=t,a.detect=t,a}),jQuery(document).ready(function(e){"ontouchstart"in document.documentElement&&e("body").removeClass("no-touch"),bowser.msie&&11==bowser.version?e("body").addClass("ie-11"):bowser.safari&&e("body").addClass("safari")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvd3Nlci5qcyIsInRoZW1lLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJuYW1lIiwiZGVmaW5pdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwidCIsImRldGVjdCIsInVhIiwiZ2V0Rmlyc3RNYXRjaCIsInJlZ2V4IiwibWF0Y2giLCJsZW5ndGgiLCJnZXRTZWNvbmRNYXRjaCIsInJlc3VsdCIsImlvc2RldmljZSIsInRvTG93ZXJDYXNlIiwiYW5kcm9pZCIsInRlc3QiLCJuZXh1c01vYmlsZSIsIm5leHVzVGFibGV0IiwiY2hyb21lb3MiLCJzaWxrIiwic2FpbGZpc2giLCJ0aXplbiIsIndlYm9zIiwid2luZG93c3Bob25lIiwid2luZG93cyIsIm1hYyIsImxpbnV4IiwiZWRnZVZlcnNpb24iLCJ2ZXJzaW9uSWRlbnRpZmllciIsInRhYmxldCIsIm1vYmlsZSIsInhib3giLCJvcGVyYSIsInZlcnNpb24iLCJzYW1zdW5nQnJvd3NlciIsIndoYWxlIiwibXpicm93c2VyIiwiY29hc3QiLCJmb2N1cyIsInlhbmRleGJyb3dzZXIiLCJ1Y2Jyb3dzZXIiLCJtYXh0aG9uIiwiZXBpcGhhbnkiLCJwdWZmaW4iLCJzbGVpcG5pciIsImtNZWxlb24iLCJvc25hbWUiLCJtc2VkZ2UiLCJtc2llIiwiY2hyb21lQm9vayIsImNocm9tZSIsInZpdmFsZGkiLCJzZWFtb25rZXkiLCJmaXJlZm94IiwiZmlyZWZveG9zIiwicGhhbnRvbSIsInNsaW1lciIsImJsYWNrYmVycnkiLCJ0b3VjaHBhZCIsImJhZGEiLCJxdXB6aWxsYSIsImNocm9taXVtIiwic2FmYXJpIiwiZ29vZ2xlYm90IiwiYmxpbmsiLCJ3ZWJraXQiLCJnZWNrbyIsImlvcyIsIm9zVmVyc2lvbiIsInMiLCJnZXRXaW5kb3dzVmVyc2lvbiIsInJlcGxhY2UiLCJvc3ZlcnNpb24iLCJvc01ham9yVmVyc2lvbiIsInNwbGl0IiwiY29tcGFyZVZlcnNpb25zIiwiYSIsImMiLCJ4IiwiYm93c2VyIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiZ2V0VmVyc2lvblByZWNpc2lvbiIsIm1hcCIsImFyciIsIml0ZXJhdG9yIiwiaSIsIkFycmF5IiwicHJvdG90eXBlIiwiY2FsbCIsInB1c2giLCJ2ZXJzaW9ucyIsInByZWNpc2lvbiIsIk1hdGgiLCJtYXgiLCJjaHVua3MiLCJkZWx0YSIsImpvaW4iLCJjaHVuayIsInJldmVyc2UiLCJpc1Vuc3VwcG9ydGVkQnJvd3NlciIsIm1pblZlcnNpb25zIiwic3RyaWN0TW9kZSIsIl9ib3dzZXIiLCJicm93c2VyIiwiaGFzT3duUHJvcGVydHkiLCJFcnJvciIsIlN0cmluZyIsImJyb3dzZXJMaXN0IiwiYnJvd3Nlckl0ZW0iLCJjaGVjayIsIl9kZXRlY3QiLCJqUXVlcnkiLCJkb2N1bWVudCIsInJlYWR5IiwiJCIsImRvY3VtZW50RWxlbWVudCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiXSwibWFwcGluZ3MiOiJDQU1BLFNBQUFBLEVBQUFDLEVBQUFDLEdBQ0Esb0JBQUFDLFFBQUFBLE9BQUFDLFFBQUFELE9BQUFDLFFBQUFGLElBQ0EsbUJBQUFHLFFBQUFBLE9BQUFDLElBQUFELE9BQUFKLEVBQUFDLEdBQ0FGLEVBQUFDLEdBQUFDLElBSEEsQ0FJQUssS0FBQSxTQUFBLFdBS0EsSUFBQUMsR0FBQSxFQUVBLFNBQUFDLEVBQUFDLEdBRUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBSCxFQUFBRyxNQUFBRCxHQUNBLE9BQUFDLEdBQUEsRUFBQUEsRUFBQUMsUUFBQUQsRUFBQSxJQUFBLEdBR0EsU0FBQUUsRUFBQUgsR0FDQSxJQUFBQyxFQUFBSCxFQUFBRyxNQUFBRCxHQUNBLE9BQUFDLEdBQUEsRUFBQUEsRUFBQUMsUUFBQUQsRUFBQSxJQUFBLEdBR0EsSUFvQkFHLEVBcEJBQyxFQUFBTixFQUFBLHVCQUFBTyxjQUVBQyxHQURBLGdCQUFBQyxLQUFBVixJQUNBLFdBQUFVLEtBQUFWLEdBQ0FXLEVBQUEsb0JBQUFELEtBQUFWLEdBQ0FZ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QUFBQyxHQU1BLGlCQUFBRixTQUFBRyxpQkFFQUQsRUFBQSxRQUFBRSxZQUFBLFlBSUF0QyxPQUFBL0IsTUFBQSxJQUFBK0IsT0FBQTlDLFFBQ0FrRixFQUFBLFFBQUFHLFNBQUEsU0FDQXZDLE9BQUFqQixRQUNBcUQsRUFBQSxRQUFBRyxTQUFBIiwiZmlsZSI6InRoZW1lLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQm93c2VyIC0gYSBicm93c2VyIGRldGVjdG9yXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGVkL2Jvd3NlclxuICogTUlUIExpY2Vuc2UgfCAoYykgRHVzdGluIERpYXogMjAxNVxuICovXG5cbiFmdW5jdGlvbiAocm9vdCwgbmFtZSwgZGVmaW5pdGlvbikge1xuICBpZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykgbW9kdWxlLmV4cG9ydHMgPSBkZWZpbml0aW9uKClcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIGRlZmluZShuYW1lLCBkZWZpbml0aW9uKVxuICBlbHNlIHJvb3RbbmFtZV0gPSBkZWZpbml0aW9uKClcbn0odGhpcywgJ2Jvd3NlcicsIGZ1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAgKiBTZWUgdXNlcmFnZW50cy5qcyBmb3IgZXhhbXBsZXMgb2YgbmF2aWdhdG9yLnVzZXJBZ2VudFxuICAgICovXG5cbiAgdmFyIHQgPSB0cnVlXG5cbiAgZnVuY3Rpb24gZGV0ZWN0KHVhKSB7XG5cbiAgICBmdW5jdGlvbiBnZXRGaXJzdE1hdGNoKHJlZ2V4KSB7XG4gICAgICB2YXIgbWF0Y2ggPSB1YS5tYXRjaChyZWdleCk7XG4gICAgICByZXR1cm4gKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+IDEgJiYgbWF0Y2hbMV0pIHx8ICcnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNlY29uZE1hdGNoKHJlZ2V4KSB7XG4gICAgICB2YXIgbWF0Y2ggPSB1YS5tYXRjaChyZWdleCk7XG4gICAgICByZXR1cm4gKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+IDEgJiYgbWF0Y2hbMl0pIHx8ICcnO1xuICAgIH1cblxuICAgIHZhciBpb3NkZXZpY2UgPSBnZXRGaXJzdE1hdGNoKC8oaXBvZHxpcGhvbmV8aXBhZCkvaSkudG9Mb3dlckNhc2UoKVxuICAgICAgLCBsaWtlQW5kcm9pZCA9IC9saWtlIGFuZHJvaWQvaS50ZXN0KHVhKVxuICAgICAgLCBhbmRyb2lkID0gIWxpa2VBbmRyb2lkICYmIC9hbmRyb2lkL2kudGVzdCh1YSlcbiAgICAgICwgbmV4dXNNb2JpbGUgPSAvbmV4dXNcXHMqWzAtNl1cXHMqL2kudGVzdCh1YSlcbiAgICAgICwgbmV4dXNUYWJsZXQgPSAhbmV4dXNNb2JpbGUgJiYgL25leHVzXFxzKlswLTldKy9pLnRlc3QodWEpXG4gICAgICAsIGNocm9tZW9zID0gL0NyT1MvLnRlc3QodWEpXG4gICAgICAsIHNpbGsgPSAvc2lsay9pLnRlc3QodWEpXG4gICAgICAsIHNhaWxmaXNoID0gL3NhaWxmaXNoL2kudGVzdCh1YSlcbiAgICAgICwgdGl6ZW4gPSAvdGl6ZW4vaS50ZXN0KHVhKVxuICAgICAgLCB3ZWJvcyA9IC8od2VifGhwdykob3wwKXMvaS50ZXN0KHVhKVxuICAgICAgLCB3aW5kb3dzcGhvbmUgPSAvd2luZG93cyBwaG9uZS9pLnRlc3QodWEpXG4gICAgICAsIHNhbXN1bmdCcm93c2VyID0gL1NhbXN1bmdCcm93c2VyL2kudGVzdCh1YSlcbiAgICAgICwgd2luZG93cyA9ICF3aW5kb3dzcGhvbmUgJiYgL3dpbmRvd3MvaS50ZXN0KHVhKVxuICAgICAgLCBtYWMgPSAhaW9zZGV2aWNlICYmICFzaWxrICYmIC9tYWNpbnRvc2gvaS50ZXN0KHVhKVxuICAgICAgLCBsaW51eCA9ICFhbmRyb2lkICYmICFzYWlsZmlzaCAmJiAhdGl6ZW4gJiYgIXdlYm9zICYmIC9saW51eC9pLnRlc3QodWEpXG4gICAgICAsIGVkZ2VWZXJzaW9uID0gZ2V0U2Vjb25kTWF0Y2goL2VkZyhbZWFdfGlvcylcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICAsIHZlcnNpb25JZGVudGlmaWVyID0gZ2V0Rmlyc3RNYXRjaCgvdmVyc2lvblxcLyhcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgICwgdGFibGV0ID0gL3RhYmxldC9pLnRlc3QodWEpICYmICEvdGFibGV0IHBjL2kudGVzdCh1YSlcbiAgICAgICwgbW9iaWxlID0gIXRhYmxldCAmJiAvW14tXW1vYmkvaS50ZXN0KHVhKVxuICAgICAgLCB4Ym94ID0gL3hib3gvaS50ZXN0KHVhKVxuICAgICAgLCByZXN1bHRcblxuICAgIGlmICgvb3BlcmEvaS50ZXN0KHVhKSkge1xuICAgICAgLy8gIGFuIG9sZCBPcGVyYVxuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnT3BlcmEnXG4gICAgICAsIG9wZXJhOiB0XG4gICAgICAsIHZlcnNpb246IHZlcnNpb25JZGVudGlmaWVyIHx8IGdldEZpcnN0TWF0Y2goLyg/Om9wZXJhfG9wcnxvcGlvcylbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKC9vcHJcXC98b3Bpb3MvaS50ZXN0KHVhKSkge1xuICAgICAgLy8gYSBuZXcgT3BlcmFcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ09wZXJhJ1xuICAgICAgICAsIG9wZXJhOiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86b3ByfG9waW9zKVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvU2Ftc3VuZ0Jyb3dzZXIvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnU2Ftc3VuZyBJbnRlcm5ldCBmb3IgQW5kcm9pZCdcbiAgICAgICAgLCBzYW1zdW5nQnJvd3NlcjogdFxuICAgICAgICAsIHZlcnNpb246IHZlcnNpb25JZGVudGlmaWVyIHx8IGdldEZpcnN0TWF0Y2goLyg/OlNhbXN1bmdCcm93c2VyKVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvV2hhbGUvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnTkFWRVIgV2hhbGUgYnJvd3NlcidcbiAgICAgICAgLCB3aGFsZTogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OndoYWxlKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9NWkJyb3dzZXIvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnTVogQnJvd3NlcidcbiAgICAgICAgLCBtemJyb3dzZXI6IHRcbiAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpNWkJyb3dzZXIpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL2NvYXN0L2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ09wZXJhIENvYXN0J1xuICAgICAgICAsIGNvYXN0OiB0XG4gICAgICAgICwgdmVyc2lvbjogdmVyc2lvbklkZW50aWZpZXIgfHwgZ2V0Rmlyc3RNYXRjaCgvKD86Y29hc3QpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9mb2N1cy9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdGb2N1cydcbiAgICAgICAgLCBmb2N1czogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmZvY3VzKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC95YWJyb3dzZXIvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnWWFuZGV4IEJyb3dzZXInXG4gICAgICAsIHlhbmRleGJyb3dzZXI6IHRcbiAgICAgICwgdmVyc2lvbjogdmVyc2lvbklkZW50aWZpZXIgfHwgZ2V0Rmlyc3RNYXRjaCgvKD86eWFicm93c2VyKVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvdWNicm93c2VyL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICBuYW1lOiAnVUMgQnJvd3NlcidcbiAgICAgICAgLCB1Y2Jyb3dzZXI6IHRcbiAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzp1Y2Jyb3dzZXIpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL214aW9zL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ01heHRob24nXG4gICAgICAgICwgbWF4dGhvbjogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/Om14aW9zKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9lcGlwaGFueS9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdFcGlwaGFueSdcbiAgICAgICAgLCBlcGlwaGFueTogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmVwaXBoYW55KVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9wdWZmaW4vaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnUHVmZmluJ1xuICAgICAgICAsIHB1ZmZpbjogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OnB1ZmZpbilbXFxzXFwvXShcXGQrKD86XFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvc2xlaXBuaXIvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnU2xlaXBuaXInXG4gICAgICAgICwgc2xlaXBuaXI6IHRcbiAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpzbGVpcG5pcilbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvay1tZWxlb24vaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnSy1NZWxlb24nXG4gICAgICAgICwga01lbGVvbjogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmstbWVsZW9uKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHdpbmRvd3NwaG9uZSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnV2luZG93cyBQaG9uZSdcbiAgICAgICwgb3NuYW1lOiAnV2luZG93cyBQaG9uZSdcbiAgICAgICwgd2luZG93c3Bob25lOiB0XG4gICAgICB9XG4gICAgICBpZiAoZWRnZVZlcnNpb24pIHtcbiAgICAgICAgcmVzdWx0Lm1zZWRnZSA9IHRcbiAgICAgICAgcmVzdWx0LnZlcnNpb24gPSBlZGdlVmVyc2lvblxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJlc3VsdC5tc2llID0gdFxuICAgICAgICByZXN1bHQudmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goL2llbW9iaWxlXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvbXNpZXx0cmlkZW50L2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ0ludGVybmV0IEV4cGxvcmVyJ1xuICAgICAgLCBtc2llOiB0XG4gICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/Om1zaWUgfHJ2OikoXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaHJvbWVvcykge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnQ2hyb21lJ1xuICAgICAgLCBvc25hbWU6ICdDaHJvbWUgT1MnXG4gICAgICAsIGNocm9tZW9zOiB0XG4gICAgICAsIGNocm9tZUJvb2s6IHRcbiAgICAgICwgY2hyb21lOiB0XG4gICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmNocm9tZXxjcmlvc3xjcm1vKVxcLyhcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKC9lZGcoW2VhXXxpb3MpL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ01pY3Jvc29mdCBFZGdlJ1xuICAgICAgLCBtc2VkZ2U6IHRcbiAgICAgICwgdmVyc2lvbjogZWRnZVZlcnNpb25cbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL3ZpdmFsZGkvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnVml2YWxkaSdcbiAgICAgICAgLCB2aXZhbGRpOiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvdml2YWxkaVxcLyhcXGQrKFxcLlxcZCspPykvaSkgfHwgdmVyc2lvbklkZW50aWZpZXJcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoc2FpbGZpc2gpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ1NhaWxmaXNoJ1xuICAgICAgLCBvc25hbWU6ICdTYWlsZmlzaCBPUydcbiAgICAgICwgc2FpbGZpc2g6IHRcbiAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvc2FpbGZpc2hcXHM/YnJvd3NlclxcLyhcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL3NlYW1vbmtleVxcLy9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdTZWFNb25rZXknXG4gICAgICAsIHNlYW1vbmtleTogdFxuICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC9zZWFtb25rZXlcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9maXJlZm94fGljZXdlYXNlbHxmeGlvcy9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdGaXJlZm94J1xuICAgICAgLCBmaXJlZm94OiB0XG4gICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmZpcmVmb3h8aWNld2Vhc2VsfGZ4aW9zKVsgXFwvXShcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICAgIGlmICgvXFwoKG1vYmlsZXx0YWJsZXQpO1teXFwpXSpydjpbXFxkXFwuXStcXCkvaS50ZXN0KHVhKSkge1xuICAgICAgICByZXN1bHQuZmlyZWZveG9zID0gdFxuICAgICAgICByZXN1bHQub3NuYW1lID0gJ0ZpcmVmb3ggT1MnXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHNpbGspIHtcbiAgICAgIHJlc3VsdCA9ICB7XG4gICAgICAgIG5hbWU6ICdBbWF6b24gU2lsaydcbiAgICAgICwgc2lsazogdFxuICAgICAgLCB2ZXJzaW9uIDogZ2V0Rmlyc3RNYXRjaCgvc2lsa1xcLyhcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL3BoYW50b20vaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnUGhhbnRvbUpTJ1xuICAgICAgLCBwaGFudG9tOiB0XG4gICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goL3BoYW50b21qc1xcLyhcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL3NsaW1lcmpzL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ1NsaW1lckpTJ1xuICAgICAgICAsIHNsaW1lcjogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goL3NsaW1lcmpzXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvYmxhY2tiZXJyeXxcXGJiYlxcZCsvaS50ZXN0KHVhKSB8fCAvcmltXFxzdGFibGV0L2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ0JsYWNrQmVycnknXG4gICAgICAsIG9zbmFtZTogJ0JsYWNrQmVycnkgT1MnXG4gICAgICAsIGJsYWNrYmVycnk6IHRcbiAgICAgICwgdmVyc2lvbjogdmVyc2lvbklkZW50aWZpZXIgfHwgZ2V0Rmlyc3RNYXRjaCgvYmxhY2tiZXJyeVtcXGRdK1xcLyhcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAod2Vib3MpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ1dlYk9TJ1xuICAgICAgLCBvc25hbWU6ICdXZWJPUydcbiAgICAgICwgd2Vib3M6IHRcbiAgICAgICwgdmVyc2lvbjogdmVyc2lvbklkZW50aWZpZXIgfHwgZ2V0Rmlyc3RNYXRjaCgvdyg/OmViKT9vc2Jyb3dzZXJcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICB9O1xuICAgICAgL3RvdWNocGFkXFwvL2kudGVzdCh1YSkgJiYgKHJlc3VsdC50b3VjaHBhZCA9IHQpXG4gICAgfVxuICAgIGVsc2UgaWYgKC9iYWRhL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ0JhZGEnXG4gICAgICAsIG9zbmFtZTogJ0JhZGEnXG4gICAgICAsIGJhZGE6IHRcbiAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvZG9sZmluXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGl6ZW4pIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ1RpemVuJ1xuICAgICAgLCBvc25hbWU6ICdUaXplbidcbiAgICAgICwgdGl6ZW46IHRcbiAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86dGl6ZW5cXHM/KT9icm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxuICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoL3F1cHppbGxhL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ1F1cFppbGxhJ1xuICAgICAgICAsIHF1cHppbGxhOiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86cXVwemlsbGEpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSkgfHwgdmVyc2lvbklkZW50aWZpZXJcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL2Nocm9taXVtL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ0Nocm9taXVtJ1xuICAgICAgICAsIGNocm9taXVtOiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86Y2hyb21pdW0pW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspPykvaSkgfHwgdmVyc2lvbklkZW50aWZpZXJcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL2Nocm9tZXxjcmlvc3xjcm1vL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ0Nocm9tZSdcbiAgICAgICAgLCBjaHJvbWU6IHRcbiAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpjaHJvbWV8Y3Jpb3N8Y3JtbylcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGFuZHJvaWQpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ0FuZHJvaWQnXG4gICAgICAgICwgdmVyc2lvbjogdmVyc2lvbklkZW50aWZpZXJcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL3NhZmFyaXxhcHBsZXdlYmtpdC9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdTYWZhcmknXG4gICAgICAsIHNhZmFyaTogdFxuICAgICAgfVxuICAgICAgaWYgKHZlcnNpb25JZGVudGlmaWVyKSB7XG4gICAgICAgIHJlc3VsdC52ZXJzaW9uID0gdmVyc2lvbklkZW50aWZpZXJcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaW9zZGV2aWNlKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWUgOiBpb3NkZXZpY2UgPT0gJ2lwaG9uZScgPyAnaVBob25lJyA6IGlvc2RldmljZSA9PSAnaXBhZCcgPyAnaVBhZCcgOiAnaVBvZCdcbiAgICAgIH1cbiAgICAgIC8vIFdURjogdmVyc2lvbiBpcyBub3QgcGFydCBvZiB1c2VyIGFnZW50IGluIHdlYiBhcHBzXG4gICAgICBpZiAodmVyc2lvbklkZW50aWZpZXIpIHtcbiAgICAgICAgcmVzdWx0LnZlcnNpb24gPSB2ZXJzaW9uSWRlbnRpZmllclxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmKC9nb29nbGVib3QvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnR29vZ2xlYm90J1xuICAgICAgLCBnb29nbGVib3Q6IHRcbiAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvZ29vZ2xlYm90XFwvKFxcZCsoXFwuXFxkKykpL2kpIHx8IHZlcnNpb25JZGVudGlmaWVyXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiBnZXRGaXJzdE1hdGNoKC9eKC4qKVxcLyguKikgLyksXG4gICAgICAgIHZlcnNpb246IGdldFNlY29uZE1hdGNoKC9eKC4qKVxcLyguKikgLylcbiAgICAgfTtcbiAgIH1cblxuICAgIC8vIHNldCB3ZWJraXQgb3IgZ2Vja28gZmxhZyBmb3IgYnJvd3NlcnMgYmFzZWQgb24gdGhlc2UgZW5naW5lc1xuICAgIGlmICghcmVzdWx0Lm1zZWRnZSAmJiAvKGFwcGxlKT93ZWJraXQvaS50ZXN0KHVhKSkge1xuICAgICAgaWYgKC8oYXBwbGUpP3dlYmtpdFxcLzUzN1xcLjM2L2kudGVzdCh1YSkpIHtcbiAgICAgICAgcmVzdWx0Lm5hbWUgPSByZXN1bHQubmFtZSB8fCBcIkJsaW5rXCJcbiAgICAgICAgcmVzdWx0LmJsaW5rID0gdFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0Lm5hbWUgPSByZXN1bHQubmFtZSB8fCBcIldlYmtpdFwiXG4gICAgICAgIHJlc3VsdC53ZWJraXQgPSB0XG4gICAgICB9XG4gICAgICBpZiAoIXJlc3VsdC52ZXJzaW9uICYmIHZlcnNpb25JZGVudGlmaWVyKSB7XG4gICAgICAgIHJlc3VsdC52ZXJzaW9uID0gdmVyc2lvbklkZW50aWZpZXJcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFyZXN1bHQub3BlcmEgJiYgL2dlY2tvXFwvL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdC5uYW1lID0gcmVzdWx0Lm5hbWUgfHwgXCJHZWNrb1wiXG4gICAgICByZXN1bHQuZ2Vja28gPSB0XG4gICAgICByZXN1bHQudmVyc2lvbiA9IHJlc3VsdC52ZXJzaW9uIHx8IGdldEZpcnN0TWF0Y2goL2dlY2tvXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgIH1cblxuICAgIC8vIHNldCBPUyBmbGFncyBmb3IgcGxhdGZvcm1zIHRoYXQgaGF2ZSBtdWx0aXBsZSBicm93c2Vyc1xuICAgIGlmICghcmVzdWx0LndpbmRvd3NwaG9uZSAmJiAoYW5kcm9pZCB8fCByZXN1bHQuc2lsaykpIHtcbiAgICAgIHJlc3VsdC5hbmRyb2lkID0gdFxuICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdBbmRyb2lkJ1xuICAgIH0gZWxzZSBpZiAoIXJlc3VsdC53aW5kb3dzcGhvbmUgJiYgaW9zZGV2aWNlKSB7XG4gICAgICByZXN1bHRbaW9zZGV2aWNlXSA9IHRcbiAgICAgIHJlc3VsdC5pb3MgPSB0XG4gICAgICByZXN1bHQub3NuYW1lID0gJ2lPUydcbiAgICB9IGVsc2UgaWYgKG1hYykge1xuICAgICAgcmVzdWx0Lm1hYyA9IHRcbiAgICAgIHJlc3VsdC5vc25hbWUgPSAnbWFjT1MnXG4gICAgfSBlbHNlIGlmICh4Ym94KSB7XG4gICAgICByZXN1bHQueGJveCA9IHRcbiAgICAgIHJlc3VsdC5vc25hbWUgPSAnWGJveCdcbiAgICB9IGVsc2UgaWYgKHdpbmRvd3MpIHtcbiAgICAgIHJlc3VsdC53aW5kb3dzID0gdFxuICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdXaW5kb3dzJ1xuICAgIH0gZWxzZSBpZiAobGludXgpIHtcbiAgICAgIHJlc3VsdC5saW51eCA9IHRcbiAgICAgIHJlc3VsdC5vc25hbWUgPSAnTGludXgnXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0V2luZG93c1ZlcnNpb24gKHMpIHtcbiAgICAgIHN3aXRjaCAocykge1xuICAgICAgICBjYXNlICdOVCc6IHJldHVybiAnTlQnXG4gICAgICAgIGNhc2UgJ1hQJzogcmV0dXJuICdYUCdcbiAgICAgICAgY2FzZSAnTlQgNS4wJzogcmV0dXJuICcyMDAwJ1xuICAgICAgICBjYXNlICdOVCA1LjEnOiByZXR1cm4gJ1hQJ1xuICAgICAgICBjYXNlICdOVCA1LjInOiByZXR1cm4gJzIwMDMnXG4gICAgICAgIGNhc2UgJ05UIDYuMCc6IHJldHVybiAnVmlzdGEnXG4gICAgICAgIGNhc2UgJ05UIDYuMSc6IHJldHVybiAnNydcbiAgICAgICAgY2FzZSAnTlQgNi4yJzogcmV0dXJuICc4J1xuICAgICAgICBjYXNlICdOVCA2LjMnOiByZXR1cm4gJzguMSdcbiAgICAgICAgY2FzZSAnTlQgMTAuMCc6IHJldHVybiAnMTAnXG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPUyB2ZXJzaW9uIGV4dHJhY3Rpb25cbiAgICB2YXIgb3NWZXJzaW9uID0gJyc7XG4gICAgaWYgKHJlc3VsdC53aW5kb3dzKSB7XG4gICAgICBvc1ZlcnNpb24gPSBnZXRXaW5kb3dzVmVyc2lvbihnZXRGaXJzdE1hdGNoKC9XaW5kb3dzICgoTlR8WFApKCBcXGRcXGQ/LlxcZCk/KS9pKSlcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC53aW5kb3dzcGhvbmUpIHtcbiAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goL3dpbmRvd3MgcGhvbmUgKD86b3MpP1xccz8oXFxkKyhcXC5cXGQrKSopL2kpO1xuICAgIH0gZWxzZSBpZiAocmVzdWx0Lm1hYykge1xuICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvTWFjIE9TIFggKFxcZCsoW19cXC5cXHNdXFxkKykqKS9pKTtcbiAgICAgIG9zVmVyc2lvbiA9IG9zVmVyc2lvbi5yZXBsYWNlKC9bX1xcc10vZywgJy4nKTtcbiAgICB9IGVsc2UgaWYgKGlvc2RldmljZSkge1xuICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvb3MgKFxcZCsoW19cXHNdXFxkKykqKSBsaWtlIG1hYyBvcyB4L2kpO1xuICAgICAgb3NWZXJzaW9uID0gb3NWZXJzaW9uLnJlcGxhY2UoL1tfXFxzXS9nLCAnLicpO1xuICAgIH0gZWxzZSBpZiAoYW5kcm9pZCkge1xuICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvYW5kcm9pZFsgXFwvLV0oXFxkKyhcXC5cXGQrKSopL2kpO1xuICAgIH0gZWxzZSBpZiAocmVzdWx0LndlYm9zKSB7XG4gICAgICBvc1ZlcnNpb24gPSBnZXRGaXJzdE1hdGNoKC8oPzp3ZWJ8aHB3KW9zXFwvKFxcZCsoXFwuXFxkKykqKS9pKTtcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC5ibGFja2JlcnJ5KSB7XG4gICAgICBvc1ZlcnNpb24gPSBnZXRGaXJzdE1hdGNoKC9yaW1cXHN0YWJsZXRcXHNvc1xccyhcXGQrKFxcLlxcZCspKikvaSk7XG4gICAgfSBlbHNlIGlmIChyZXN1bHQuYmFkYSkge1xuICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvYmFkYVxcLyhcXGQrKFxcLlxcZCspKikvaSk7XG4gICAgfSBlbHNlIGlmIChyZXN1bHQudGl6ZW4pIHtcbiAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goL3RpemVuW1xcL1xcc10oXFxkKyhcXC5cXGQrKSopL2kpO1xuICAgIH1cbiAgICBpZiAob3NWZXJzaW9uKSB7XG4gICAgICByZXN1bHQub3N2ZXJzaW9uID0gb3NWZXJzaW9uO1xuICAgIH1cblxuICAgIC8vIGRldmljZSB0eXBlIGV4dHJhY3Rpb25cbiAgICB2YXIgb3NNYWpvclZlcnNpb24gPSAhcmVzdWx0LndpbmRvd3MgJiYgb3NWZXJzaW9uLnNwbGl0KCcuJylbMF07XG4gICAgaWYgKFxuICAgICAgICAgdGFibGV0XG4gICAgICB8fCBuZXh1c1RhYmxldFxuICAgICAgfHwgaW9zZGV2aWNlID09ICdpcGFkJ1xuICAgICAgfHwgKGFuZHJvaWQgJiYgKG9zTWFqb3JWZXJzaW9uID09IDMgfHwgKG9zTWFqb3JWZXJzaW9uID49IDQgJiYgIW1vYmlsZSkpKVxuICAgICAgfHwgcmVzdWx0LnNpbGtcbiAgICApIHtcbiAgICAgIHJlc3VsdC50YWJsZXQgPSB0XG4gICAgfSBlbHNlIGlmIChcbiAgICAgICAgIG1vYmlsZVxuICAgICAgfHwgaW9zZGV2aWNlID09ICdpcGhvbmUnXG4gICAgICB8fCBpb3NkZXZpY2UgPT0gJ2lwb2QnXG4gICAgICB8fCBhbmRyb2lkXG4gICAgICB8fCBuZXh1c01vYmlsZVxuICAgICAgfHwgcmVzdWx0LmJsYWNrYmVycnlcbiAgICAgIHx8IHJlc3VsdC53ZWJvc1xuICAgICAgfHwgcmVzdWx0LmJhZGFcbiAgICApIHtcbiAgICAgIHJlc3VsdC5tb2JpbGUgPSB0XG4gICAgfVxuXG4gICAgLy8gR3JhZGVkIEJyb3dzZXIgU3VwcG9ydFxuICAgIC8vIGh0dHA6Ly9kZXZlbG9wZXIueWFob28uY29tL3l1aS9hcnRpY2xlcy9nYnNcbiAgICBpZiAocmVzdWx0Lm1zZWRnZSB8fFxuICAgICAgICAocmVzdWx0Lm1zaWUgJiYgcmVzdWx0LnZlcnNpb24gPj0gMTApIHx8XG4gICAgICAgIChyZXN1bHQueWFuZGV4YnJvd3NlciAmJiByZXN1bHQudmVyc2lvbiA+PSAxNSkgfHxcblx0XHQgICAgKHJlc3VsdC52aXZhbGRpICYmIHJlc3VsdC52ZXJzaW9uID49IDEuMCkgfHxcbiAgICAgICAgKHJlc3VsdC5jaHJvbWUgJiYgcmVzdWx0LnZlcnNpb24gPj0gMjApIHx8XG4gICAgICAgIChyZXN1bHQuc2Ftc3VuZ0Jyb3dzZXIgJiYgcmVzdWx0LnZlcnNpb24gPj0gNCkgfHxcbiAgICAgICAgKHJlc3VsdC53aGFsZSAmJiBjb21wYXJlVmVyc2lvbnMoW3Jlc3VsdC52ZXJzaW9uLCAnMS4wJ10pID09PSAxKSB8fFxuICAgICAgICAocmVzdWx0Lm16YnJvd3NlciAmJiBjb21wYXJlVmVyc2lvbnMoW3Jlc3VsdC52ZXJzaW9uLCAnNi4wJ10pID09PSAxKSB8fFxuICAgICAgICAocmVzdWx0LmZvY3VzICYmIGNvbXBhcmVWZXJzaW9ucyhbcmVzdWx0LnZlcnNpb24sICcxLjAnXSkgPT09IDEpIHx8XG4gICAgICAgIChyZXN1bHQuZmlyZWZveCAmJiByZXN1bHQudmVyc2lvbiA+PSAyMC4wKSB8fFxuICAgICAgICAocmVzdWx0LnNhZmFyaSAmJiByZXN1bHQudmVyc2lvbiA+PSA2KSB8fFxuICAgICAgICAocmVzdWx0Lm9wZXJhICYmIHJlc3VsdC52ZXJzaW9uID49IDEwLjApIHx8XG4gICAgICAgIChyZXN1bHQuaW9zICYmIHJlc3VsdC5vc3ZlcnNpb24gJiYgcmVzdWx0Lm9zdmVyc2lvbi5zcGxpdChcIi5cIilbMF0gPj0gNikgfHxcbiAgICAgICAgKHJlc3VsdC5ibGFja2JlcnJ5ICYmIHJlc3VsdC52ZXJzaW9uID49IDEwLjEpXG4gICAgICAgIHx8IChyZXN1bHQuY2hyb21pdW0gJiYgcmVzdWx0LnZlcnNpb24gPj0gMjApXG4gICAgICAgICkge1xuICAgICAgcmVzdWx0LmEgPSB0O1xuICAgIH1cbiAgICBlbHNlIGlmICgocmVzdWx0Lm1zaWUgJiYgcmVzdWx0LnZlcnNpb24gPCAxMCkgfHxcbiAgICAgICAgKHJlc3VsdC5jaHJvbWUgJiYgcmVzdWx0LnZlcnNpb24gPCAyMCkgfHxcbiAgICAgICAgKHJlc3VsdC5maXJlZm94ICYmIHJlc3VsdC52ZXJzaW9uIDwgMjAuMCkgfHxcbiAgICAgICAgKHJlc3VsdC5zYWZhcmkgJiYgcmVzdWx0LnZlcnNpb24gPCA2KSB8fFxuICAgICAgICAocmVzdWx0Lm9wZXJhICYmIHJlc3VsdC52ZXJzaW9uIDwgMTAuMCkgfHxcbiAgICAgICAgKHJlc3VsdC5pb3MgJiYgcmVzdWx0Lm9zdmVyc2lvbiAmJiByZXN1bHQub3N2ZXJzaW9uLnNwbGl0KFwiLlwiKVswXSA8IDYpXG4gICAgICAgIHx8IChyZXN1bHQuY2hyb21pdW0gJiYgcmVzdWx0LnZlcnNpb24gPCAyMClcbiAgICAgICAgKSB7XG4gICAgICByZXN1bHQuYyA9IHRcbiAgICB9IGVsc2UgcmVzdWx0LnggPSB0XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICB2YXIgYm93c2VyID0gZGV0ZWN0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnID8gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCAnJyA6ICcnKVxuXG4gIGJvd3Nlci50ZXN0ID0gZnVuY3Rpb24gKGJyb3dzZXJMaXN0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBicm93c2VyTGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGJyb3dzZXJJdGVtID0gYnJvd3Nlckxpc3RbaV07XG4gICAgICBpZiAodHlwZW9mIGJyb3dzZXJJdGVtPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmIChicm93c2VySXRlbSBpbiBib3dzZXIpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZlcnNpb24gcHJlY2lzaW9ucyBjb3VudFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIGdldFZlcnNpb25QcmVjaXNpb24oXCIxLjEwLjNcIikgLy8gM1xuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHZlcnNpb25cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0VmVyc2lvblByZWNpc2lvbih2ZXJzaW9uKSB7XG4gICAgcmV0dXJuIHZlcnNpb24uc3BsaXQoXCIuXCIpLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcnJheTo6bWFwIHBvbHlmaWxsXG4gICAqXG4gICAqIEBwYXJhbSAge0FycmF5fSBhcnJcbiAgICogQHBhcmFtICB7RnVuY3Rpb259IGl0ZXJhdG9yXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgZnVuY3Rpb24gbWFwKGFyciwgaXRlcmF0b3IpIHtcbiAgICB2YXIgcmVzdWx0ID0gW10sIGk7XG4gICAgaWYgKEFycmF5LnByb3RvdHlwZS5tYXApIHtcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYXJyLCBpdGVyYXRvcik7XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdC5wdXNoKGl0ZXJhdG9yKGFycltpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBicm93c2VyIHZlcnNpb24gd2VpZ2h0XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgY29tcGFyZVZlcnNpb25zKFsnMS4xMC4yLjEnLCAgJzEuOC4yLjEuOTAnXSkgICAgLy8gMVxuICAgKiAgIGNvbXBhcmVWZXJzaW9ucyhbJzEuMDEwLjIuMScsICcxLjA5LjIuMS45MCddKTsgIC8vIDFcbiAgICogICBjb21wYXJlVmVyc2lvbnMoWycxLjEwLjIuMScsICAnMS4xMC4yLjEnXSk7ICAgICAvLyAwXG4gICAqICAgY29tcGFyZVZlcnNpb25zKFsnMS4xMC4yLjEnLCAgJzEuMDgwMC4yJ10pOyAgICAgLy8gLTFcbiAgICpcbiAgICogQHBhcmFtICB7QXJyYXk8U3RyaW5nPn0gdmVyc2lvbnMgdmVyc2lvbnMgdG8gY29tcGFyZVxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IGNvbXBhcmlzb24gcmVzdWx0XG4gICAqL1xuICBmdW5jdGlvbiBjb21wYXJlVmVyc2lvbnModmVyc2lvbnMpIHtcbiAgICAvLyAxKSBnZXQgY29tbW9uIHByZWNpc2lvbiBmb3IgYm90aCB2ZXJzaW9ucywgZm9yIGV4YW1wbGUgZm9yIFwiMTAuMFwiIGFuZCBcIjlcIiBpdCBzaG91bGQgYmUgMlxuICAgIHZhciBwcmVjaXNpb24gPSBNYXRoLm1heChnZXRWZXJzaW9uUHJlY2lzaW9uKHZlcnNpb25zWzBdKSwgZ2V0VmVyc2lvblByZWNpc2lvbih2ZXJzaW9uc1sxXSkpO1xuICAgIHZhciBjaHVua3MgPSBtYXAodmVyc2lvbnMsIGZ1bmN0aW9uICh2ZXJzaW9uKSB7XG4gICAgICB2YXIgZGVsdGEgPSBwcmVjaXNpb24gLSBnZXRWZXJzaW9uUHJlY2lzaW9uKHZlcnNpb24pO1xuXG4gICAgICAvLyAyKSBcIjlcIiAtPiBcIjkuMFwiIChmb3IgcHJlY2lzaW9uID0gMilcbiAgICAgIHZlcnNpb24gPSB2ZXJzaW9uICsgbmV3IEFycmF5KGRlbHRhICsgMSkuam9pbihcIi4wXCIpO1xuXG4gICAgICAvLyAzKSBcIjkuMFwiIC0+IFtcIjAwMDAwMDAwMFwiXCIsIFwiMDAwMDAwMDA5XCJdXG4gICAgICByZXR1cm4gbWFwKHZlcnNpb24uc3BsaXQoXCIuXCIpLCBmdW5jdGlvbiAoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheSgyMCAtIGNodW5rLmxlbmd0aCkuam9pbihcIjBcIikgKyBjaHVuaztcbiAgICAgIH0pLnJldmVyc2UoKTtcbiAgICB9KTtcblxuICAgIC8vIGl0ZXJhdGUgaW4gcmV2ZXJzZSBvcmRlciBieSByZXZlcnNlZCBjaHVua3MgYXJyYXlcbiAgICB3aGlsZSAoLS1wcmVjaXNpb24gPj0gMCkge1xuICAgICAgLy8gNCkgY29tcGFyZTogXCIwMDAwMDAwMDlcIiA+IFwiMDAwMDAwMDEwXCIgPSBmYWxzZSAoYnV0IFwiOVwiID4gXCIxMFwiID0gdHJ1ZSlcbiAgICAgIGlmIChjaHVua3NbMF1bcHJlY2lzaW9uXSA+IGNodW5rc1sxXVtwcmVjaXNpb25dKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoY2h1bmtzWzBdW3ByZWNpc2lvbl0gPT09IGNodW5rc1sxXVtwcmVjaXNpb25dKSB7XG4gICAgICAgIGlmIChwcmVjaXNpb24gPT09IDApIHtcbiAgICAgICAgICAvLyBhbGwgdmVyc2lvbiBjaHVua3MgYXJlIHNhbWVcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYnJvd3NlciBpcyB1bnN1cHBvcnRlZFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIGJvd3Nlci5pc1Vuc3VwcG9ydGVkQnJvd3Nlcih7XG4gICAqICAgICBtc2llOiBcIjEwXCIsXG4gICAqICAgICBmaXJlZm94OiBcIjIzXCIsXG4gICAqICAgICBjaHJvbWU6IFwiMjlcIixcbiAgICogICAgIHNhZmFyaTogXCI1LjFcIixcbiAgICogICAgIG9wZXJhOiBcIjE2XCIsXG4gICAqICAgICBwaGFudG9tOiBcIjUzNFwiXG4gICAqICAgfSk7XG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gIG1pblZlcnNpb25zIG1hcCBvZiBtaW5pbWFsIHZlcnNpb24gdG8gYnJvd3NlclxuICAgKiBAcGFyYW0gIHtCb29sZWFufSBbc3RyaWN0TW9kZSA9IGZhbHNlXSBmbGFnIHRvIHJldHVybiBmYWxzZSBpZiBicm93c2VyIHdhc24ndCBmb3VuZCBpbiBtYXBcbiAgICogQHBhcmFtICB7U3RyaW5nfSAgW3VhXSB1c2VyIGFnZW50IHN0cmluZ1xuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgZnVuY3Rpb24gaXNVbnN1cHBvcnRlZEJyb3dzZXIobWluVmVyc2lvbnMsIHN0cmljdE1vZGUsIHVhKSB7XG4gICAgdmFyIF9ib3dzZXIgPSBib3dzZXI7XG5cbiAgICAvLyBtYWtlIHN0cmljdE1vZGUgcGFyYW0gb3B0aW9uYWwgd2l0aCB1YSBwYXJhbSB1c2FnZVxuICAgIGlmICh0eXBlb2Ygc3RyaWN0TW9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHVhID0gc3RyaWN0TW9kZTtcbiAgICAgIHN0cmljdE1vZGUgPSB2b2lkKDApO1xuICAgIH1cblxuICAgIGlmIChzdHJpY3RNb2RlID09PSB2b2lkKDApKSB7XG4gICAgICBzdHJpY3RNb2RlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh1YSkge1xuICAgICAgX2Jvd3NlciA9IGRldGVjdCh1YSk7XG4gICAgfVxuXG4gICAgdmFyIHZlcnNpb24gPSBcIlwiICsgX2Jvd3Nlci52ZXJzaW9uO1xuICAgIGZvciAodmFyIGJyb3dzZXIgaW4gbWluVmVyc2lvbnMpIHtcbiAgICAgIGlmIChtaW5WZXJzaW9ucy5oYXNPd25Qcm9wZXJ0eShicm93c2VyKSkge1xuICAgICAgICBpZiAoX2Jvd3Nlclticm93c2VyXSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgbWluVmVyc2lvbnNbYnJvd3Nlcl0gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jyb3dzZXIgdmVyc2lvbiBpbiB0aGUgbWluVmVyc2lvbiBtYXAgc2hvdWxkIGJlIGEgc3RyaW5nOiAnICsgYnJvd3NlciArICc6ICcgKyBTdHJpbmcobWluVmVyc2lvbnMpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBicm93c2VyIHZlcnNpb24gYW5kIG1pbiBzdXBwb3J0ZWQgdmVyc2lvbi5cbiAgICAgICAgICByZXR1cm4gY29tcGFyZVZlcnNpb25zKFt2ZXJzaW9uLCBtaW5WZXJzaW9uc1ticm93c2VyXV0pIDwgMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdHJpY3RNb2RlOyAvLyBub3QgZm91bmRcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBicm93c2VyIGlzIHN1cHBvcnRlZFxuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IG1pblZlcnNpb25zIG1hcCBvZiBtaW5pbWFsIHZlcnNpb24gdG8gYnJvd3NlclxuICAgKiBAcGFyYW0gIHtCb29sZWFufSBbc3RyaWN0TW9kZSA9IGZhbHNlXSBmbGFnIHRvIHJldHVybiBmYWxzZSBpZiBicm93c2VyIHdhc24ndCBmb3VuZCBpbiBtYXBcbiAgICogQHBhcmFtICB7U3RyaW5nfSAgW3VhXSB1c2VyIGFnZW50IHN0cmluZ1xuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgZnVuY3Rpb24gY2hlY2sobWluVmVyc2lvbnMsIHN0cmljdE1vZGUsIHVhKSB7XG4gICAgcmV0dXJuICFpc1Vuc3VwcG9ydGVkQnJvd3NlcihtaW5WZXJzaW9ucywgc3RyaWN0TW9kZSwgdWEpO1xuICB9XG5cbiAgYm93c2VyLmlzVW5zdXBwb3J0ZWRCcm93c2VyID0gaXNVbnN1cHBvcnRlZEJyb3dzZXI7XG4gIGJvd3Nlci5jb21wYXJlVmVyc2lvbnMgPSBjb21wYXJlVmVyc2lvbnM7XG4gIGJvd3Nlci5jaGVjayA9IGNoZWNrO1xuXG4gIC8qXG4gICAqIFNldCBvdXIgZGV0ZWN0IG1ldGhvZCB0byB0aGUgbWFpbiBib3dzZXIgb2JqZWN0IHNvIHdlIGNhblxuICAgKiByZXVzZSBpdCB0byB0ZXN0IG90aGVyIHVzZXIgYWdlbnRzLlxuICAgKiBUaGlzIGlzIG5lZWRlZCB0byBpbXBsZW1lbnQgZnV0dXJlIHRlc3RzLlxuICAgKi9cbiAgYm93c2VyLl9kZXRlY3QgPSBkZXRlY3Q7XG5cbiAgLypcbiAgICogU2V0IG91ciBkZXRlY3QgcHVibGljIG1ldGhvZCB0byB0aGUgbWFpbiBib3dzZXIgb2JqZWN0XG4gICAqIFRoaXMgaXMgbmVlZGVkIHRvIGltcGxlbWVudCBib3dzZXIgaW4gc2VydmVyIHNpZGVcbiAgICovXG4gIGJvd3Nlci5kZXRlY3QgPSBkZXRlY3Q7XG4gIHJldHVybiBib3dzZXJcbn0pO1xuIiwialF1ZXJ5KCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uKCAkICkge1xuXHQvLyBJbnNpZGUgb2YgdGhpcyBmdW5jdGlvbiwgJCgpIHdpbGwgd29yayBhcyBhbiBhbGlhcyBmb3IgalF1ZXJ5KClcblx0Ly8gYW5kIG90aGVyIGxpYnJhcmllcyBhbHNvIHVzaW5nICQgd2lsbCBub3QgYmUgYWNjZXNzaWJsZSB1bmRlciB0aGlzIHNob3J0Y3V0XG5cdC8vIGh0dHBzOi8vY29kZXgud29yZHByZXNzLm9yZy9GdW5jdGlvbl9SZWZlcmVuY2Uvd3BfZW5xdWV1ZV9zY3JpcHQjalF1ZXJ5X25vQ29uZmxpY3RfV3JhcHBlcnNcblxuXHQvLyBUb3VjaCBEZXZpY2UgRGV0ZWN0aW9uXG5cdHZhciBpc1RvdWNoRGV2aWNlID0gJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHRpZiggaXNUb3VjaERldmljZSApIHtcblx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ25vLXRvdWNoJyk7XG5cdH1cblxuXHQvLyBCcm93c2VyIGRldGVjdGlvbiB2aWEgQm93c2VyIChodHRwczovL2dpdGh1Yi5jb20vbGFuY2VkaWtzb24vYm93c2VyKSAtIGFkZCBkZXRlY3Rpb24gYXMgbmVlZGVkXG5cdGlmKCBib3dzZXIubXNpZSAmJiBib3dzZXIudmVyc2lvbiA9PSAxMSApIHtcblx0XHQkKCdib2R5JykuYWRkQ2xhc3MoJ2llLTExJyk7XG5cdH0gZWxzZSBpZiAoIGJvd3Nlci5zYWZhcmkgKSB7XG5cdFx0JCgnYm9keScpLmFkZENsYXNzKCdzYWZhcmknKTtcblx0fVxuXG59KTtcbiJdfQ==
